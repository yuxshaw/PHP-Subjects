webpackJsonp([45],{"Nfp/":function(e,t){},PwHM:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=i("woOf"),n=i.n(s),o=i("Dd8w"),r=i.n(o),l=(i("vAZe"),i("Au9i")),a=i("NYxO"),c=i("J6os"),u={name:"RegionPicker",props:{items:{type:Array},modal:{default:!0},modalFade:{default:!1},lockScroll:{default:!1},closeOnClickModal:{default:!0}},data:function(){return{currentValue:!1}},computed:{buildItems:function(){var e=new Array;return this.getDefaultItems(this.items,e),e}},methods:{getDefaultItems:function(e,t){if(1==e[0].more){t&&0==t.length?(t.push({flex:1,values:e,textAlign:"center",valueKey:t.length}),this.getDefaultItems(e,t)):t&&t.length>0&&(t.push({flex:1,values:e[0].regions,textAlign:"center",valueKey:t.length}),this.getDefaultItems(e[0].regions,t))}},onValuesChange:function(e,t){e.setSlotValues(1,t[0]?t[0].regions:[]),e.setSlotValues(2,t[1]?t[1].regions:[]),e.setSlotValues(3,t[2]?t[2].regions:[])},onclickMask:function(){this.currentValue=!1},cancel:function(){this.currentValue=!1},confirm:function(){this.currentValue=!1;var e=this.$refs.picker.getValues();this.$emit("onConfirm",e)}}},d={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("mt-popup",{attrs:{position:"bottom"},model:{value:e.currentValue,callback:function(t){e.currentValue=t},expression:"currentValue"}},[i("mt-picker",{ref:"picker",staticClass:"picker",attrs:{slots:e.buildItems,valueKey:"name",showToolbar:"",itemHeight:44},on:{change:e.onValuesChange}},[i("div",{staticClass:"toolbar"},[i("button",{staticClass:"toolbar-item cancel-item",on:{click:e.cancel}},[e._v("取消")]),e._v(" "),i("div",{staticClass:"picker-header"},[e._v("请选择地区")]),e._v(" "),i("button",{staticClass:"toolbar-item confirm-item",on:{click:e.confirm}},[e._v("确定")])])])],1)},staticRenderFns:[]};var f={components:{RegionPicker:i("VU/8")(u,d,!1,function(e){i("wJh1")},"data-v-3a641c8b",null).exports,picker:""},data:function(){return{templeRegion:null}},created:function(){this.fetchRegions()},computed:r()({},Object(a.e)({regions:function(e){return e.region.items}}),{isAddMode:function(){return"add"===this.$route.query.mode},getTitle:function(){return this.isAddMode?"新增地址":"修改收货地址"},getName:function(){return!this.isAddMode&&this.getItem?this.getItem.name:null},getMobile:function(){return!this.isAddMode&&this.getItem?this.getItem.mobile:null},getRegion:function(){var e=null;if(this.isAddMode);else if(this.getItem){var t=this.getItem.regions;e=this.getRegionStr(t)}return e},getAddress:function(){return!this.isAddMode&&this.getItem?this.getItem.address:null},getZipcode:function(){return!this.isAddMode&&this.getItem?this.getItem.zip_code:null},getItem:function(){return this.$route.query.item},getSumitTitle:function(){return this.$route.query.isFromCheckout?"保存并使用":"保存"}}),methods:r()({},Object(a.d)(["addAddressItem","modifyAddressItem","selectAddressItem"]),Object(a.b)({fetchRegions:"fetchRegions"}),{isCitynNumber:function(){this.picker=n()([],this.regions.length<=1?this.regions[0].regions:this.regions),console.log(this.picker)},goBack:function(){this.$router.go(-1)},buildAegions:function(e){},onRegion:function(e,t){this.$refs.picker.currentValue=!0,console.log(this.items)},onPickerConfirm:function(e){this.$refs.region.value=this.getRegionStr(e),this.templeRegion=e[3]},getRegionStr:function(e){for(var t="",i=0;i<e.length;i++){var s=e[i];0!==i?t=t+" "+s.name:t+=s.name}return t},updateSelectedAddress:function(e){var t=this.$route.query.isFromCheckout,i=this.$route.query.goBackLevel?this.$route.query.goBackLevel:-1;t?(this.selectAddressItem(e),this.$router.go(i)):this.goBack()},submit:function(){var e=this,t=this.$refs.name.value,i=this.$refs.mobile.value,s=null;s=this.isAddMode?this.templeRegion:this.templeRegion?this.templeRegion:this.getItem.regions[3];var n=this.$refs.address.value,o=this.$refs.zipCode.value;if(null!==t&&void 0!==t)if(0!==t.length)if(t.length<2||t.length>15)Object(l.Toast)("2-15个字符限制");else if(null!==i&&void 0!==i)if(0!==i.length)if(this.validator.isNumber(i))if(null!==s&&void 0!==s)if(null!==n&&void 0!==n)if(0!==n.length)if(null!==o&&void 0!==o)if(0!==o.length)if(this.isAddMode)l.Indicator.open(),c.a(t,i,null,o,s.id,n).then(function(t){l.Indicator.close();var i=t.consignee;e.addAddressItem(i),e.updateSelectedAddress(i)},function(e){l.Indicator.close(),Object(l.Toast)(e.errorMsg)});else{var r=this.getItem,a=r?r.id:null;l.Indicator.open(),c.e(a,t,i,null,o,s.id,n).then(function(t){l.Indicator.close();var i=t.consignee;e.modifyAddressItem(i),e.updateSelectedAddress(i)},function(e){l.Indicator.close(),Object(l.Toast)(e.errorMsg)})}else Object(l.Toast)("请填写邮政编码");else Object(l.Toast)("请填写邮政编码");else Object(l.Toast)("请填写详细地址");else Object(l.Toast)("请填写详细地址");else Object(l.Toast)("请选择所在地区");else Object(l.Toast)("请填写正确格式的手机号码");else Object(l.Toast)("请填写手机号码");else Object(l.Toast)("请填写手机号码");else Object(l.Toast)("请填写收件人姓名");else Object(l.Toast)("请填写收件人姓名")}})},m={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"container"},[i("mt-header",{staticClass:"header",attrs:{fixed:"",title:e.getTitle}},[i("header-item",{attrs:{slot:"left",isBack:!0},on:{onclick:e.goBack},slot:"left"})],1),e._v(" "),i("form-input-item",{ref:"name",staticClass:"item section",attrs:{title:"收件人姓名",maxlength:"15",default:e.getName,placeholder:"请如实填写收货人姓名"}}),e._v(" "),i("form-input-item",{ref:"mobile",staticClass:"item",attrs:{title:"手机号码",maxlength:"11",default:e.getMobile,placeholder:"请如实填写手机号码"}}),e._v(" "),i("form-text-item",{ref:"region",staticClass:"item",attrs:{title:"所在地区",default:e.getRegion,placeholder:"市，区，街"},on:{onclick:e.onRegion}}),e._v(" "),i("form-input-item",{ref:"address",staticClass:"item",attrs:{title:"详细地址",default:e.getAddress,placeholder:"请填写详细地址"}}),e._v(" "),i("form-input-item",{ref:"zipCode",staticClass:"item",attrs:{title:"邮政编码",default:e.getZipcode,placeholder:"请填写正确的邮政编码"}}),e._v(" "),i("gk-button",{staticClass:"button",attrs:{type:"primary"},on:{click:e.submit}},[e._v(e._s(e.getSumitTitle))]),e._v(" "),i("region-picker",{ref:"picker",attrs:{items:e.regions},on:{onConfirm:e.onPickerConfirm}})],1)},staticRenderFns:[]};var g=i("VU/8")(f,m,!1,function(e){i("Nfp/")},"data-v-226b5876",null);t.default=g.exports},wJh1:function(e,t){}});
//# sourceMappingURL=45.317f34855bdb0b3544d4.js.map